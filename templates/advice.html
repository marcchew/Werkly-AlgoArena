{% extends "base.html" %}

{% block title %}Career Advice - Werkly{% endblock %}

{% block content %}
<div class="container my-4">
    <!-- Header Section -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card bg-gradient-secondary text-white">
                <div class="card-body text-center py-5">
                    <h1 class="display-5 fw-bold mb-3">
                        <i class="bi bi-lightbulb me-3"></i>Career Advice Center
                    </h1>
                    <p class="lead mb-0">
                        Get personalized career guidance powered by AI and expert insights
                    </p>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <!-- AI Advice Chat -->
        <div class="col-lg-8 mb-4">
            <div class="card h-100">
                <div class="card-header">
                    <h5 class="mb-0">
                        <i class="bi bi-robot me-2"></i>Ask Your Career Advisor
                    </h5>
                </div>
                <div class="card-body">
                    <p class="text-muted mb-4">
                        Get personalized career advice based on your profile and goals. Ask anything about career development, skills, job market trends, or interview preparation.
                    </p>
                    
                    <form id="adviceForm">
                        <div class="mb-3">
                            <label for="category" class="form-label">Advice Category</label>
                            <select class="form-select" id="category" name="category">
                                <option value="general">General Career Advice</option>
                                <option value="skills">Skills Development</option>
                                <option value="interview">Interview Preparation</option>
                                <option value="salary">Salary Negotiation</option>
                                <option value="career-change">Career Change</option>
                                <option value="education">Education & Qualifications</option>
                                <option value="networking">Networking</option>
                                <option value="remote-work">Remote Work</option>
                                <option value="leadership">Leadership & Management</option>
                                <option value="industry-trends">Industry Trends</option>
                            </select>
                        </div>
                        
                        <div class="mb-3">
                            <label for="question" class="form-label">Your Question</label>
                            <textarea class="form-control" id="question" name="question" rows="4" 
                                      placeholder="Ask your career question here. Be specific for better advice!" required></textarea>
                        </div>
                        
                        <button type="submit" class="btn btn-gradient-primary" id="askBtn">
                            <i class="bi bi-send me-2"></i>Get Advice
                        </button>
                    </form>
                    
                    <div id="adviceResponse" class="mt-4 d-none">
                        <div class="alert alert-light border">
                            <h6 class="alert-heading">
                                <i class="bi bi-person-check me-2"></i>Career Advisor Response:
                            </h6>
                            <div id="adviceContent"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quick Advice Categories -->
        <div class="col-lg-4">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">
                        <i class="bi bi-grid me-2"></i>Popular Topics
                    </h5>
                </div>
                <div class="card-body">
                    <div class="d-grid gap-2">
                        <button class="btn btn-outline-primary btn-sm text-start" onclick="askQuickQuestion('How do I improve my resume?', 'general')">
                            <i class="bi bi-file-text me-2"></i>Resume Improvement
                        </button>
                        <button class="btn btn-outline-primary btn-sm text-start" onclick="askQuickQuestion('What skills should I learn for my career?', 'skills')">
                            <i class="bi bi-tools me-2"></i>Skills Development
                        </button>
                        <button class="btn btn-outline-primary btn-sm text-start" onclick="askQuickQuestion('How do I prepare for job interviews?', 'interview')">
                            <i class="bi bi-chat-dots me-2"></i>Interview Tips
                        </button>
                        <button class="btn btn-outline-primary btn-sm text-start" onclick="askQuickQuestion('How do I negotiate my salary?', 'salary')">
                            <i class="bi bi-currency-dollar me-2"></i>Salary Negotiation
                        </button>
                        <button class="btn btn-outline-primary btn-sm text-start" onclick="askQuickQuestion('How do I network effectively?', 'networking')">
                            <i class="bi bi-people me-2"></i>Networking
                        </button>
                        <button class="btn btn-outline-primary btn-sm text-start" onclick="askQuickQuestion('How do I transition to remote work?', 'remote-work')">
                            <i class="bi bi-house me-2"></i>Remote Work
                        </button>
                    </div>
                </div>
            </div>

            <!-- Career Resources -->
            <div class="card mt-4">
                <div class="card-header">
                    <h5 class="mb-0">
                        <i class="bi bi-bookmark me-2"></i>Career Resources
                    </h5>
                </div>
                <div class="card-body">
                    <div class="list-group list-group-flush">
                        <div class="list-group-item d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-mortarboard me-2"></i>Skills Assessment</span>
                            <small class="text-muted">Coming Soon</small>
                        </div>
                        <div class="list-group-item d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-graph-up me-2"></i>Market Trends</span>
                            <small class="text-muted">Coming Soon</small>
                        </div>
                        <div class="list-group-item d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-calendar-check me-2"></i>Career Roadmap</span>
                            <small class="text-muted">Coming Soon</small>
                        </div>
                        <div class="list-group-item d-flex justify-content-between align-items-center">
                            <span><i class="bi bi-award me-2"></i>Certifications</span>
                            <small class="text-muted">Coming Soon</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Static Advice Sections -->
    <div class="row mt-5">
        <div class="col-12">
            <h3 class="mb-4">Featured Career Insights</h3>
        </div>
        
        <div class="col-md-6 col-lg-4 mb-4">
            <div class="card h-100">
                <div class="card-body">
                    <h5 class="card-title">
                        <i class="bi bi-trophy text-warning me-2"></i>Top Skills in 2025
                    </h5>
                    <p class="card-text">
                        Stay ahead with the most in-demand skills across different industries.
                    </p>
                    <ul class="list-unstyled small">
                        <li><i class="bi bi-check text-success me-1"></i>AI & Machine Learning</li>
                        <li><i class="bi bi-check text-success me-1"></i>Cloud Computing</li>
                        <li><i class="bi bi-check text-success me-1"></i>Data Analysis</li>
                        <li><i class="bi bi-check text-success me-1"></i>Digital Marketing</li>
                        <li><i class="bi bi-check text-success me-1"></i>Cybersecurity</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="col-md-6 col-lg-4 mb-4">
            <div class="card h-100">
                <div class="card-body">
                    <h5 class="card-title">
                        <i class="bi bi-briefcase text-primary me-2"></i>Interview Success
                    </h5>
                    <p class="card-text">
                        Essential tips to ace your next job interview and land your dream role.
                    </p>
                    <ul class="list-unstyled small">
                        <li><i class="bi bi-check text-success me-1"></i>Research the company</li>
                        <li><i class="bi bi-check text-success me-1"></i>Practice common questions</li>
                        <li><i class="bi bi-check text-success me-1"></i>Prepare thoughtful questions</li>
                        <li><i class="bi bi-check text-success me-1"></i>Follow up professionally</li>
                        <li><i class="bi bi-check text-success me-1"></i>Show genuine enthusiasm</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="col-md-6 col-lg-4 mb-4">
            <div class="card h-100">
                <div class="card-body">
                    <h5 class="card-title">
                        <i class="bi bi-graph-up-arrow text-success me-2"></i>Career Growth
                    </h5>
                    <p class="card-text">
                        Strategies to accelerate your career progression and achieve your goals.
                    </p>
                    <ul class="list-unstyled small">
                        <li><i class="bi bi-check text-success me-1"></i>Set clear career goals</li>
                        <li><i class="bi bi-check text-success me-1"></i>Seek mentorship</li>
                        <li><i class="bi bi-check text-success me-1"></i>Continuous learning</li>
                        <li><i class="bi bi-check text-success me-1"></i>Build your network</li>
                        <li><i class="bi bi-check text-success me-1"></i>Take on new challenges</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
document.getElementById('adviceForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    const question = document.getElementById('question').value.trim();
    const category = document.getElementById('category').value;
    
    if (!question) {
        alert('Please enter your question.');
        return;
    }
    
    getAdvice(question, category);
});

function askQuickQuestion(question, category) {
    document.getElementById('question').value = question;
    document.getElementById('category').value = category;
    getAdvice(question, category);
}

function getAdvice(question, category) {
    const btn = document.getElementById('askBtn');
    const originalText = btn.innerHTML;
    const responseDiv = document.getElementById('adviceResponse');
    const contentDiv = document.getElementById('adviceContent');
    
    // Show loading state
    btn.innerHTML = '<i class="bi bi-hourglass-split me-2"></i>Getting Advice...';
    btn.disabled = true;
    responseDiv.classList.add('d-none');
    
    fetch('/api/get-advice', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({
            question: question,
            category: category
        })
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            contentDiv.innerHTML = data.advice.replace(/\n/g, '<br>');
            responseDiv.classList.remove('d-none');
            
            // Scroll to response
            responseDiv.scrollIntoView({ behavior: 'smooth', block: 'start' });
        } else {
            alert('Error: ' + (data.error || 'Failed to get advice'));
        }
    })
    .catch(error => {
        console.error('Error:', error);
        alert('Error getting advice. Please try again.');
    })
    .finally(() => {
        btn.innerHTML = originalText;
        btn.disabled = false;
    });
}
</script>
{% endblock %} 